<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Create R-examples</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">IDR4000 Course notes</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Lessons
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lesson_1_installation.html">Installing and starting up R and RStudio</a>
    </li>
    <li>
      <a href="lesson_2_markdown.html">Creating a report using rmarkdown</a>
    </li>
    <li>
      <a href="lesson_3_structure.html">Structuring an analysis</a>
    </li>
    <li>
      <a href="lesson_4_scripts.html">R scripts and R markdown files</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="lesson_5_import_data.html">Import data</a>
    </li>
    <li>
      <a href="lesson_6_make_summaries.html">Make summaries of data</a>
    </li>
    <li>
      <a href="lesson_7_ggplot2.html">Making figures</a>
    </li>
    <li>
      <a href="lesson_8_making_tables.html">Making tables</a>
    </li>
    <li>
      <a href="lesson_9_git.html">Version control and GitHub</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="lesson_10_inference.html">Introduction to statistical inference</a>
    </li>
    <li>
      <a href="lesson_11_inference2.html">Statistical inference, p-values and confidence intervals</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="lesson_12_regressionModels.html">Regression models part 1</a>
    </li>
    <li>
      <a href="lesson_13_regressionModels2.html">Regression models part 2: Lactate threshold analysis</a>
    </li>
    <li>
      <a href="lesson_14_correlation.html">Regression models and correlations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ex1_1_intro.html">Basic R</a>
    </li>
    <li>
      <a href="ex1_2_import.html">Importing data</a>
    </li>
    <li>
      <a href="ex1_3_summarise.html">Summarise data</a>
    </li>
    <li>
      <a href="ex1_4_figures.html">Making figures</a>
    </li>
    <li>
      <a href="ex1_5_group_exercise.html">Group exercises</a>
    </li>
    <li>
      <a href="ex2_1_inference.html">Inference</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="assignment_1_descriptives.html">Descriptive data</a>
    </li>
    <li>
      <a href="feedback_1.html">Feedback assignment 1</a>
    </li>
    <li>
      <a href="assignment_2_inference.html">Inference</a>
    </li>
    <li>
      <a href="feedback_2.html">Feedback assignment 2</a>
    </li>
    <li>
      <a href="assignment_3_regression.html">Regression models</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="faq.html">
    <span class="fa fa-question fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Create R-examples</h1>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Examples in R are extremely helpful as you often do stuff that has been done before. Examples tend do give more meaning when you are using data sets that are known. In R examples, commonly used data sets are built-in in different R packages. The <code>mtcars</code> data set is an example of a data set used to show basic data wrangling.</p>
<p>The aim of this group exercise is to write R examples using a data set that we know of. I also encurage you to write in your preffered language (Norsk!).</p>
</div>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
<p>The exercises are designed with an known outcome, what you want to achieve, from a given starting point. They represent common scenarios in data wrangling and plotting of data. All exercises uses the data set provided bu Haun et al. 2019. Write the example with a introduction of what you want to achieve with a list detailing what you will do. Write code chunks that does the operation (with short comments). If you only want to show code in your example without having R evaluate it put <code>eval = FALSE</code> in the code chunk label <code>{r, eval = FALSE}</code>. There might be suggestions in other exercises than the one written specifically for your group to help you to solve the exercise. If you finish early, try another groups exercise.</p>
<div id="group-1" class="section level2">
<h2>Group 1</h2>
<p>Plotting in <code>ggplot2</code> often requires data to be in a long format. You are expected to write an example where changes in CSA are differentiated between fast and slow fiber types. The final figure should look something like this:</p>
<p><img src="ex1_5_group_exercise_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>The problem is that the data set looks like this when we select the variables <code>SUB_ID</code>, <code>T3T1_PERCENT_CHANGE_FAST_CSA</code> and <code>T3T1_PERCENT_CHANGE_SLOW_CSA</code>:</p>
<pre><code>## # A tibble: 30 x 3
##    SUB_ID T3T1_PERCENT_CHANGE_FAST_CSA T3T1_PERCENT_CHANGE_SLOW_CSA
##    &lt;chr&gt;                         &lt;dbl&gt;                        &lt;dbl&gt;
##  1 MRV001                        14.7                        -12.3 
##  2 MRV002                        16.2                         10.0 
##  3 MRV003                        39.8                         14.8 
##  4 MRV004                        -2.55                        12.0 
##  5 MRV005                        59.7                         63.6 
##  6 MRV006                        -6.87                       -18.2 
##  7 MRV007                         7.7                        -12.5 
##  8 MRV009                        25.7                          3.1 
##  9 MRV010                        -0.63                        -3.38
## 10 MRV011                        45.4                         26.6 
## # ... with 20 more rows</code></pre>
<p>And before plotting, we would like it to look like this:</p>
<pre><code>## # A tibble: 60 x 3
##    SUB_ID fibertype                    change
##    &lt;chr&gt;  &lt;chr&gt;                         &lt;dbl&gt;
##  1 MRV001 T3T1_PERCENT_CHANGE_FAST_CSA  14.7 
##  2 MRV001 T3T1_PERCENT_CHANGE_SLOW_CSA -12.3 
##  3 MRV002 T3T1_PERCENT_CHANGE_FAST_CSA  16.2 
##  4 MRV002 T3T1_PERCENT_CHANGE_SLOW_CSA  10.0 
##  5 MRV003 T3T1_PERCENT_CHANGE_FAST_CSA  39.8 
##  6 MRV003 T3T1_PERCENT_CHANGE_SLOW_CSA  14.8 
##  7 MRV004 T3T1_PERCENT_CHANGE_FAST_CSA  -2.55
##  8 MRV004 T3T1_PERCENT_CHANGE_SLOW_CSA  12.0 
##  9 MRV005 T3T1_PERCENT_CHANGE_FAST_CSA  59.7 
## 10 MRV005 T3T1_PERCENT_CHANGE_SLOW_CSA  63.6 
## # ... with 50 more rows</code></pre>
<p>A suggestion is to look into the help pages describing <code>pivot_longer</code> and <code>pivot_wider</code> and describe their use.</p>
<p>To get started, here is example code for downloading and selecting the variables:</p>
<pre class="r"><code>library(tidyverse)

hypertrophy &lt;- read_csv(&quot;https://ndownloader.figstatic.com/files/14702420&quot;)


hypertrophy %&gt;%
  select(SUB_ID, T3T1_PERCENT_CHANGE_FAST_CSA, T3T1_PERCENT_CHANGE_SLOW_CSA) %&gt;%
  print()</code></pre>
<p>Use <code>geom_boxplot()</code> in ggplot2 to create the graph. You are free to nmake the plot nicer, consider the following:</p>
<ul>
<li>Change the labels and levels of the factor <code>fibertype</code></li>
<li>Change axis labels</li>
<li>Add colors to the boxes</li>
</ul>
</div>
<div id="group-2" class="section level2">
<h2>Group 2</h2>
<p>Before plotting data it is common to do some kine of summary of the data. In ggplot2, some “geoms” does this for you but not all. In this example you are expected to describe how to summarize data and use point estimates with some measure of variation in the graph. The final figure should look something like this:</p>
<p><img src="ex1_5_group_exercise_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>This is a case of <code>group_by</code> and <code>summarise</code>.</p>
<p>Things to consider:</p>
<ul>
<li>The axis labels of the plot</li>
<li>The addition of the “MID” cluster (try <code>mutate(CLUSTER = if_else(is.na(CLUSTER), "MID", CLUSTER))</code>)</li>
<li>Change the levels of the CLUSTER factor</li>
<li>The caption (to get the ± sign, write use <code>\u00B1</code> in the <code>labs</code> function in ggplot)</li>
</ul>
</div>
<div id="group-3-and-4" class="section level2">
<h2>Group 3 and 4</h2>
<p>To plot variables over time we need to create a long data set. We are here interested in plotting lean body mass over time, the data are now stored in the variables <code>DXA_LBM_1</code>, <code>DXA_LBM_2</code> and <code>DXA_LBM_3</code>, where 1, 2 and 3 are time-points in the study. We also would like to separate the plotting per group, including a “MID” group. The resulting plot should look something like this.</p>
<p><img src="ex1_5_group_exercise_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Things to consider:</p>
<ul>
<li>Changing the axis labels and color labels (look up <code>labs</code> in ggplot2 documentation)</li>
<li>Check out <code>?pivot_longer</code>,</li>
<li>Change the labels or re-write the whole time variable to get the right labelling</li>
<li>This is a case of <code>group_by</code> and <code>summarise</code>, make sure to use a group and time variable for grouping</li>
<li>What summary function should you use?</li>
<li>In <code>aes()</code>, grouping needs to be set to cluster (<code>group = CLUSTER</code>) to make lines between data points.</li>
<li>Add a figure caption.</li>
</ul>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
